---
title: MySoClientProvider
---

The `MySoClientProvider` manages the active `MySoJsonRpcClient` that hooks and components use in the
dApp Kit.

## Usage

Place the `MySoClientProvider` at the root of your app and wrap all components that use the dApp Kit
hooks.

`MySoClientProvider` accepts a list of network configurations to create `MySoJsonRpcClient` instances
for the currently active network.

```tsx
import { createNetworkConfig, MySoClientProvider, WalletProvider } from '@socialproof/dapp-kit';
import { getJsonRpcFullnodeUrl } from '@socialproof/myso/jsonRpc';

// Config options for the networks you want to connect to
const { networkConfig } = createNetworkConfig({
	localnet: { url: getJsonRpcFullnodeUrl('localnet') },
	mainnet: { url: getJsonRpcFullnodeUrl('mainnet') },
});

function App() {
	return (
		<MySoClientProvider networks={networkConfig} defaultNetwork="localnet">
			<YourApp />
		</MySoClientProvider>
	);
}
```

## Props

- `networks`: A map of networks you can use. The keys are the network names, and the values can be
  either a configuration object (`MySoClientOptions`) or a `MySoJsonRpcClient` instance.
- `defaultNetwork`: The name of the network to use by default when using the `MySoClientProvider` as
  an uncontrolled component.
- `network`: The name of the network to use when using the `MySoClientProvider` as a controlled
  component.
- `onNetworkChange`: A callback when the active network changes.
- `createClient`: A callback when a new `MySoJsonRpcClient` is created (for example, when the active
  network changes). It receives the network name and configuration object as arguments, returning a
  `MySoJsonRpcClient` instance.

## Controlled component

The following example demonstrates a `MySoClientProvider` used as a controlled component.

```tsx
import { createNetworkConfig, MySoClientProvider } from '@socialproof/dapp-kit';
import { getJsonRpcFullnodeUrl } from '@socialproof/myso/jsonRpc';
import { useState } from 'react';

// Config options for the networks you want to connect to
const { networkConfig } = createNetworkConfig({
	localnet: { url: getJsonRpcFullnodeUrl('localnet') },
	mainnet: { url: getJsonRpcFullnodeUrl('mainnet') },
});

function App() {
	const [activeNetwork, setActiveNetwork] = useState('localnet' as keyof typeof networks);

	return (
		<MySoClientProvider
			networks={networkConfig}
			network={activeNetwork}
			onNetworkChange={(network) => {
				setActiveNetwork(network);
			}}
		>
			<YourApp />
		</MySoClientProvider>
	);
}
```

## MySoJsonRpcClient customization

The following example demonstrates how to create a custom `MySoJsonRpcClient`.

```tsx
import { MySoClientProvider } from '@socialproof/dapp-kit';
import { getJsonRpcFullnodeUrl, MySoJsonRpcClient, MySoHTTPTransport } from '@socialproof/myso/jsonRpc';

// Config options for the networks you want to connect to
const networks = {
	localnet: { url: getJsonRpcFullnodeUrl('localnet') },
	mainnet: { url: getJsonRpcFullnodeUrl('mainnet') },
} satisfies Record<string, MySoClientOptions>;

function App() {
	return (
		<MySoClientProvider
			networks={networks}
			defaultNetwork="localnet"
			createClient={(network, config) => {
				return new MySoJsonRpcClient({
					transport: new MySoHTTPTransport({
						url: 'https://api.safecoin.org',
						rpc: {
							headers: {
								Authorization: 'xyz',
							},
						},
					}),
				});
			}}
		>
			<YourApp />
		</MySoClientProvider>
	);
}
```

## Using the MySoJsonRpcClient from the provider

To use the `MySoJsonRpcClient` from the provider, import the `useMySoClient` function from the
`@socialproof/dapp-kit` module.

```tsx
import { useMySoClient } from '@socialproof/dapp-kit';

function MyComponent() {
	const client = useMySoClient();

	// use the client
}
```

## Creating a network selector

The dApp Kit doesn't provide its own network switcher, but you can use the `useMySoClientContext`
hook to get the list of networks and set the active one:

```tsx
function NetworkSelector() {
	const ctx = useMySoClientContext();

	return (
		<div>
			{Object.keys(ctx.networks).map((network) => (
				<button key={network} onClick={() => ctx.selectNetwork(network)}>
					{`select ${network}`}
				</button>
			))}
		</div>
	);
}
```

## Using network specific configuration

If your dApp runs on multiple networks, the IDs for packages and other configurations might change,
depending on which network you're using. You can use `createNetworkConfig` to create per-network
configurations that your components can access.

The `createNetworkConfig` function returns the provided configuration, along with hooks you can use
to get the variables defined in your configuration.

- `useNetworkConfig` returns the full network configuration object
- `useNetworkVariables` returns the full variables object from the network configuration
- `useNetworkVariable` returns a specific variable from the network configuration

```tsx
import { createNetworkConfig, MySoClientProvider, WalletProvider } from '@socialproof/dapp-kit';
import { getJsonRpcFullnodeUrl } from '@socialproof/myso/jsonRpc';
import { QueryClient, QueryClientProvider } from '@tanstack/react-query';

// Config options for the networks you want to connect to
const { networkConfig, useNetworkVariable } = createNetworkConfig({
	localnet: {
		url: getJsonRpcFullnodeUrl('localnet'),
		variables: {
			myMovePackageId: '0x123',
		},
	},
	mainnet: {
		url: getJsonRpcFullnodeUrl('mainnet'),
		variables: {
			myMovePackageId: '0x456',
		},
	},
});

const queryClient = new QueryClient();

function App() {
	return (
		<QueryClientProvider client={queryClient}>
			<MySoClientProvider networks={networkConfig} defaultNetwork="localnet">
				<WalletProvider>
					<YourApp />
				</WalletProvider>
			</MySoClientProvider>
		</QueryClientProvider>
	);
}

function YourApp() {
	const id = useNetworkVariable('myMovePackageId');

	return <div>Package ID: {id}</div>;
}
```
